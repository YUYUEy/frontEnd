<!DOCTYPE html>
<html>
<head>
	<title>checkLength-demo</title>
</head>
<body>
<script type="text/javascript">
// window.onload =function(){
	function CheckLength(txtObj,length) {
	    var str = txtObj.value;
	    var len = str.length;
	    var temp="";
	    var reLen = 0;

	    for (var i = 0; i < len; i++) {    
	        if (str.charCodeAt(i) >255 ) {
	            // 全角   
	            reLen += 2;
	        } else {
	           reLen++;
	        }
	        if (reLen < length+1){
	           temp+=str.charAt(i);
	        }else{
	           txtObj.value= temp;
	        }
	        
	    }
	}
	
	//获取页面上所有节点的ID----------------
	for (let { id } of document.querySelectorAll('*')) {
	  if (id) console.log(id);
	}

	for (let [index, { id }] of document.querySelectorAll('*').entries()) {
	  if (id) console.log(index, id);
	}
//数字千分位格式化
//String(10000).replace(/\d{1,3}(?=(\d{3})+(\.|$))/g,'$&,')
	document.querySelectorAll('*').forEach(it => console.log(it.id));
// }
</script>

<input id="id" name="id" value="" onKeyUp="CheckLength(this,10)" size="30" />
<span>限制输入10个半角字符(5个半角字符)</span><br>
<input type="text" name="comId" size="30" maxlength="12" 
            onkeyup="value=value.replace(/[^\w+\uFF10-\uFF19]+/g,'')" />
            <span>限制输入15个半角字符</span><br>
	
<input type="text" name="comId" size="30" maxlength="11" 
onblur="value=value.toString().replace(/,/g,'').replace(/\d{1,3}(?=(\d{3})+(\.|$))/g,'$&,')" />
<span>数字千分位格式化</span><br>
	
</body>
</html>
