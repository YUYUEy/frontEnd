
#### TCP各种定时器

**在链接建立的时候如果一直没有得到响应怎么办？**  
：有一个链接建立定时器，如果超过定时时间就中止。  
  
**如果数据发送后迟迟无回应怎么办**？  
：这里要有一个重传定时器，超过时间就重新发送。  

**如果对于每一个数据收到就立马确认效率会低，怎么办？**  
：延迟ack定时器。将必须确认的但是可以延迟确认的包通过定时，  
看这段时间内有无向对方的数据发送，如果有就进行捎带确认。  

**再来考虑一种特殊情况，B向A发送了零窗口的报文后，缓存有了一些空间，B  
又向A发送rwnd为300的报文，这个报文丢掉了。A在等待B发送非零的通知，B 
在等待A发数据，于是出现了死锁，怎么办？**  
tcp中通过一个持续计时器，当tcp一方收到对方的零窗口通知就启动，设置的时间  
到了就发送一个零窗口的报文（仅一个字节）激活。  

**time_wait定时器？**  
这个定时器的时间是两倍的MSL（最大报文生存时间），链接主动关闭的一方启动这个  
定时器。  

**fin_wait2定时器？**  
考虑一种情况，A向B主动断开链接，B收到fin后并没有返回ack响应（可能B关机了）  
如果A一直等待关闭会导致白白占用一条链接。这时就需要这个定时器来控制。
 