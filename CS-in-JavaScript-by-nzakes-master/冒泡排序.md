原文地址:[Computer science in JavaScript: Bubble sort](https://www.nczonline.net/blog/2009/05/26/computer-science-in-javascript-bubble-sort/)

排序算法是计算机专业教育的基础之一，其目的并非教你使用不同的方式排列数据，尽管在你的实际工作中可能并不会实际应用它们。反之，它们作为教授算法理论的工具，来表现同一个问题使用多种方式求解的思想。在此我将使用JavaScript来做这些，现在让我们从冒泡排序开始。

在排序算法中，通常由冒泡排序开始，它是效率最低的算法且最容易理解。 其基本思想是通过每次比较两个元素，以及在移动元素前确定其正确位置。在最后的遍历(pass)中，泡泡元素即在正确的位置，最终让其他元素继续排序，过程如下：

- 比较前两个元素
- 如果第一个元素应该排在第二个元素后面，则两者交换
- 比较第二与第三个元素
- 如果第二个元素应该排在第三个元素后面，两者交换
- 重复以上过程直到末尾

此过程重复n次(n为被排序元素数量)直到所有元素排列完毕。每次遍历序列，更小的那些元素需要再次判断，因为每次遍历使得至少一个元素固定在最终的正确位置。为了更好的描述该算法， 这里举个数组的例子`[3,2,4,5,1]`。

如果数组以升序排列，那么我们首先比较3和2，因为3应该排2后面，所以两者交换。结果为`[2,3,4,5,1]`。然后，比较3和4，3本来就应该在4前面，所以保持原状。接下来比较4和5，同上保持原状。最后比较5和1，两者交换。这时候的结果为`[2,3,4,1,5]`。 这就完成了第一次遍历，且最后一个元素已经在正确的位置。所以下一次遍历就可以不用管它。

接下来重复以上过程， 比较2和3(无交换)，比较3和4(无交换)，然后是4和1(交换)，这时候结果为`[2,3,1,4,5]` ,第二次遍历后就有两个元素固定在正确位置。现在看第三次遍历，2和3(无交换)，3和1(交换)，此时结果为`[2，1，3，4，5]`，现在有三个元素被固定在正确的位置。最后一次遍历比较2和1，两者交换。最终得到`[1,2,3,4,5]`

实现该算法的第一步，就是要创建一个两个数据交换的方法，很多低效的排序算法都有类似的方法。以下是JavaScript代码实现：

    function swap(items, firstIndex, secondIndex){
    var temp = items[firstIndex];
    items[firstIndex] = items[secondIndex];
    items[secondIndex] = temp;
    ｝
之前提到，该算法效率极低，因为它需要很多数据交换，当有n个元素在序列中时，就有**n<sup>2</sup>**次操作。其内部实现也很简单，如下：

    function bubbleSort(items){

    var len = items.length,
        i, j, stop;
    for (i=0; i < len; i++){
        for (j=0, stop=len-i; j < stop; j++){
            if (items[j] > items[j+1]){
                swap(items, j, j+1);
            }
        }
    }

    return items;
    }
    
外层循环负责遍历次数，内层循环负责数组元素的比较。内层循环基于外层循环判断哪个元素已经处于正确的位置不再需要移动。当然微弱提高冒泡排序的效率也有很多方法，其实现也比较简单。

下面是一个替代版的冒泡排序，它实现倒叙排列，所以前面的元素将被最先放置，为此，需要调换循环：

    function bubbleSort(items){
    var len = items.length,
        i, j;

    for (i=len-1; i >= 0; i--){
        for (j=len-i; j >= 0; j--){
            if (items[j] < items[j-1]){
                swap(items, j, j-1);
            }
        }
    }

    return items;
    }
    
 以上两种方式的实现代码都可以从我的Github下载：[Computer in JavaScript](https://github.com/nzakas/computer-science-in-javascript/)
 
 再次重申，冒泡排序并不需要应用到实际中，它只是一个简单教学工具，便于我们理解算法以及更进一步的知识。JavaScript自带的`Array.prototype.sort()`方法应该在大多数实际情况下使用， 它的效率很高。